<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Новое блюдо</title>
</head>
<body>
<th:block th:include="/_header"></th:block>
<th:block th:include="/_menu"></th:block>

<!-- Start Cart  -->
<div class="cart-box-main">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="table-main table-responsive">

                    <p class="text-center" th:if="${check}" th:text="${check}">
                        <i class="text-info font-weight-bold text-center"></i>
                        You don't have any items in your cart</p>

                    <table class="table" th:if="${grandTotal}">
                        <thead>
                        <tr>
                            <th>Фото</th>
                            <th>Название</th>
                            <th>Цена</th>
                            <th>Количество</th>
                            <th>Стоимость</th>
                            <th>***</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="cartItem :  ${cart.cartItems}">

                            <td class="thumbnail-img">
                                <a href="#">
                                    <img class="img-fluid"
                                         th:src="'data:image/jepg;base64,' + ${cartItem.dish.imgPath}" alt=""/>
                                </a>
                            </td>

                            <td class="name-pr">
                                <p th:text="${cartItem.dish.dishName}"></p>
                            </td>

                            <td class="price-pr">
                                <p th:text="'$' + ${cartItem.unitPrice}"></p>
                            </td>

                            <form th:action="@{/cart/update-cart}" method="post">
                                <input type="hidden" name="id" th:value="${cartItem.dish.id}">

                                <td class="quantity-box">
                                    <input type="number" name="quantity" th:value="${cartItem.quantity}" size="4"
                                           value="1" min="0" step="1"
                                           class="c-input-text qty text">
                                </td>

                                <td class="total-pr">
                                    <p th:text="'$' + ${cartItem.unitPrice * cartItem.quantity}"></p>
                                </td>

                                <td>
                                    <button type="submit" name="action" value="update" title="Update"
                                            class="btn btn-primary">
                                        Изменить
                                    </button>
                                    <button type="submit" name="action" value="delete" title="Update"
                                            class="btn btn-danger">
                                        Удалить
                                    </button>
                                </td>
                            </form>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="row my-5" th:if="${grandTotal}">
            <div class="col-lg-8 col-sm-12"></div>
            <div class="col-lg-4 col-sm-12">
                <div class="order-box">
                    <h3>Итого</h3>
                    <div class="d-flex">
                        <h4>Сумма заказа</h4>
                        <div class="ml-auto font-weight-bold" th:text="${cart.totalPrise}"></div>
                    </div>
                    <hr class="my-1">

                    <div class="d-flex">
                        <h4>Стоимость доставки</h4>
                        <div class="ml-auto font-weight-bold">0 ₽</div>
                    </div>
                </div>
            </div>
            <div class="col-12 d-flex shopping-box">
<!--                href="order/check-out.html"-->
                <a  th:href="@{/order/check-out}" class="ml-auto btn hvr-hover">Оформить</a>
            </div>
        </div>
    </div>
</div>
<!-- End Cart -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>